{% macro display_nvd_pagination(pagination, endpoint, table_id, keyword) %}
{% set base_url_params = {"keyword":keyword, "_anchor":table_id + "_tbl"} %}
{% set page_num = table_id + '_p' %}
{% set pagination_url_params = base_url_params %}
<nav aria-label="Pagination">
  <ul class="pagination">
    <li class="page-item {% if not pagination.has_previous %}disabled{% endif %}">
      {% set _dummy = pagination_url_params.update(**{page_num:pagination.bookmark_previous, "_anchor":table_id + "_tbl"}) %}
      <a class="page-link" href="{{ url_for(endpoint, **pagination_url_params) }}" tabindex="-1">Previous</a>
    </li>

    <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
      {% set _dummy = pagination_url_params.update({page_num:pagination.bookmark_next}) %}
      <a class="page-link" href="{{ url_for(endpoint, **pagination_url_params) }}">Next</a>
    </li>
  </ul>
</nav>
{% endmacro %}

{% macro display_nvd_table(current_page, endpoint, table_id, keyword) %}
{% set base_url_params = {"keyword":keyword, "_anchor":table_id + "_tbl"} %}
<div class="table-responsive">
  <table class="table table-hover table-light" id="{{ table_id }}_tbl">
    <thead>
    <tr>
      <th>Date</th>
      <th>ID</th>
      <th>Summary</th>
      <th>Products</th>
      <th>Score</th>
      <th>Patch</th>
      <th>Annotated</th>
    </tr>
    </thead>
    <tbody>
    {% for vuln_view in current_page.rows %}
    <tr class="clickable-row" data-href="{{ url_for('vuln.vuln_view', vuln_id=vuln_view.id) }}">
      <td>
        {{ vuln_view.date_created }}
      </td>
      <td>{{ vuln_view.id or "N/A" }}</td>
      <td>{{ vuln_view.comment | truncate(500) if vuln_view.comment else "N/A" }}</td>
      <td>{{ vuln_view.products or "N/A" }}</td>
      <td>
        {% if vuln_view.score %}
        {{ '%0.1f' % vuln_view.score }}
        {% else %}
        N/A
        {% endif %}
      </td>
      <td>
        {% if vuln_view.master_commit is not none %}
        <i class="fa fa-check" style="color: #00FF00"></i>
        {% elif vuln_view.vcdb_exists %}
        <i class="fa fa-question" style="color: #777777"></i>
        {% else %}
        <i class="fa fa-times" style="color: #FF0000"></i>
        {% endif %}
      </td>
      <td>
        {% if vuln_view.annotated %}
        <i class="fa fa-check" style="color: #00FF00"></i>
        {% else %}
        <i class="fa fa-times" style="color: #FF0000"></i>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endmacro %}